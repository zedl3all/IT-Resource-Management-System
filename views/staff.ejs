<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staff Dashboard - IT Resource Management System</title>
    <link rel="stylesheet" href="/css/staff.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="dashboard">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">
                <i class="fas fa-laptop-code"></i>
                <span>IT Resources</span>
            </div>
            <div class="menu">
                <a href="#" class="menu-item active" data-section="rooms">
                    <i class="fas fa-door-open"></i>
                    <span>จัดการห้อง</span>
                </a>
                <a href="#" class="menu-item" data-section="items">
                    <i class="fas fa-laptop"></i>
                    <span>จัดการอุปกรณ์</span>
                </a>
                <a href="#" class="menu-item" data-section="repairs">
                    <i class="fas fa-tools"></i>
                    <span>รายการซ่อม</span>
                </a>
                <a id="logout-btn" class="menu-item logout">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>ออกจากระบบ</span>
                </a>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="ค้นหา...">
                </div>
                <div class="user-info">
                    <div class="notifications">
                        <i class="fas fa-bell"></i>
                        <span class="notification-count">3</span>
                    </div>
                    <div class="user">
                        <img src="https://randomuser.me/api/portraits/men/1.jpg" alt="User Avatar">
                        <span>เจ้าหน้าที่ IT</span>
                    </div>
                </div>
            </header>

            <!-- *Room Management Section* -->
            <section id="rooms" class="section active">
                <div class="section-header">
                    <h1>จัดการห้องสำหรับจอง</h1>
                    <button class="btn-add" id="add-room-btn">
                        <i class="fas fa-plus"></i> เพิ่มห้องใหม่
                    </button>
                </div>

                <div class="cards-container">
                    <div class="stat-card">
                        <div class="stat-value">0</div>
                        <div class="stat-label">ห้องทั้งหมด</div>
                        <i class="fas fa-door-open stat-icon"></i>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">0</div>
                        <div class="stat-label">ห้องที่ว่าง</div>
                        <i class="fas fa-check-circle stat-icon"></i>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">0</div>
                        <div class="stat-label">ห้องที่ถูกจอง</div>
                        <i class="fas fa-calendar-check stat-icon"></i>
                    </div>
                </div>

                <div class="table-container">
                    <!-- Update Room Table in staff.ejs -->
                    <table class="data-table" id="rooms-table">
                        <thead>
                            <tr>
                                <th>รหัสห้อง</th>
                                <th>ชื่อห้อง</th>
                                <th>รายละเอียด</th>
                                <th>ความจุ</th>
                                <th>สถานะ</th>
                                <th>จัดการ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- * ROOM EXAMPLE * -->
                            <!-- <tr>
                                <td>R001</td>
                                <td>ห้องประชุมใหญ่</td>
                                <td>ห้องประชุม</td>
                                <td>30 คน</td>
                                <td><span class="status available">ว่าง</span></td>
                                <td class="actions">
                                    <button class="btn-view-room"><i class="fas fa-calendar"></i></button>
                                    <button class="btn-edit"><i class="fas fa-edit"></i></button>
                                    <button class="btn-delete"><i class="fas fa-trash"></i></button>
                                </td>
                            </tr> -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Item Management Section -->
            <section id="items" class="section">
                <div class="section-header">
                    <h1>จัดการอุปกรณ์สำหรับจอง</h1>
                    <button class="btn-add" id="add-item-btn">
                        <i class="fas fa-plus"></i> เพิ่มอุปกรณ์ใหม่
                    </button>
                </div>

                <div class="cards-container">
                    <div class="stat-card">
                        <div class="stat-value">0</div>
                        <div class="stat-label">อุปกรณ์ทั้งหมด</div>
                        <i class="fas fa-laptop stat-icon"></i>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">0</div>
                        <div class="stat-label">อุปกรณ์ที่ว่าง</div>
                        <i class="fas fa-check-circle stat-icon"></i>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">0</div>
                        <div class="stat-label">อุปกรณ์ที่ถูกจอง</div>
                        <i class="fas fa-calendar-check stat-icon"></i>
                    </div>
                </div>

                <div class="table-container">
                    <table class="data-table" id="items-table">
                        <thead>
                            <tr>
                                <th>รหัสอุปกรณ์</th>
                                <th>ชื่ออุปกรณ์</th>
                                <th>ประเภท</th>
                                <th>สถานะ</th>
                                <th>วันที่จัดซื้อ</th>
                                <th>จัดการ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- * EQUIPMENT EXAMPLE * -->
                            <!-- <tr>
                                <td>I001</td>
                                <td>โน้ตบุ๊ก Dell XPS 15</td>
                                <td>คอมพิวเตอร์</td>
                                <td><span class="status available">ว่าง</span></td>
                                <td>15/06/2022</td>
                                <td class="actions">
                                    <button class="btn-edit"><i class="fas fa-edit"></i></button>
                                    <button class="btn-view"><i class="fas fa-eye"></i></button>
                                    <button class="btn-delete"><i class="fas fa-trash"></i></button>
                                </td>
                            </tr> -->
                            
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Repair Management Section -->
            <section id="repairs" class="section">
                <div class="section-header">
                    <h1>รายการอุปกรณ์ที่ต้องซ่อม</h1>
                    <button class="btn-add" id="add-repair-btn">
                        <i class="fas fa-plus"></i> เพิ่มรายการซ่อม
                    </button>
                </div>

                <div class="cards-container">
                    <div class="stat-card">
                        <div class="stat-value">0</div>
                        <div class="stat-label">รายการทั้งหมด</div>
                        <i class="fas fa-tools stat-icon"></i>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">0</div>
                        <div class="stat-label">รอดำเนินการ</div>
                        <i class="fas fa-clock stat-icon"></i>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">0</div>
                        <div class="stat-label">กำลังดำเนินการ</div>
                        <i class="fas fa-spinner stat-icon"></i>
                    </div>
                </div>

                <div class="table-container">
                    <!-- Update Repair Table in staff.ejs -->
                    <table class="data-table" id="repairs-table">
                        <thead>
                            <tr>
                                <th>รหัสรายการ</th>
                                <th>อุปกรณ์</th>
                                <th>รายละเอียดปัญหา</th>
                                <th>ตำแหน่ง</th>
                                <th>เจ้าหน้าที่</th>
                                <th>วันที่แจ้ง</th>
                                <th>สถานะ</th>
                                <th>จัดการ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- * REPAIR EXAMPLE * -->
                            <!-- <tr>
                                <td>REP001</td>
                                <td>iPad Pro 12.9" (I003)</td>
                                <td>หน้าจอแตก</td>
                                <td>ห้อง 301 อาคาร 2</td>
                                <td>นายช่างมือหนึ่ง</td>
                                <td>15/07/2023</td>
                                <td><span class="status in-progress">กำลังซ่อม</span></td>
                                <td class="actions">
                                    <button class="btn-edit"><i class="fas fa-edit"></i></button>
                                    <button class="btn-images" data-images="repair1-1.jpg,repair1-2.jpg"><i class="fas fa-images"></i></button>
                                </td>
                            </tr> -->
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </div>

    <!-- TODO: Implement Room Modal -->
    <!-- Room Modal -->
    <div class="modal" id="room-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="room-modal-title">เพิ่ม/แก้ไขข้อมูลห้อง</h2>
                <span class="close">&times;</span>
            </div>
            <form id="room-form">
                <div class="form-group">
                    <label for="room-id">รหัสห้อง</label>
                    <input type="text" id="room-id" name="room-id" placeholder="สามารถเว้นว่างไว้เพื่อให้ระบบสร้างรหัสอัตโนมัติ" >
                </div>
                <div class="form-group">
                    <label for="room-name">ชื่อห้อง</label>
                    <input type="text" id="room-name" name="room-name" required>
                </div>
                <div class="form-group">
                    <label for="room-description">รายละเอียด</label>
                    <input type="text" id="room-description" name="room-description" required>
                </div>
                <div class="form-group">
                    <label for="room-capacity">ความจุ (คน)</label>
                    <input type="number" id="room-capacity" name="room-capacity" min="1" required>
                </div>
                <div class="form-group">
                    <label for="room-status">สถานะ</label>
                    <select id="room-status" name="room-status" required>
                        <option value="1">ว่าง</option>
                        <option value="0">จองแล้ว</option>
                        <option value="-1">ปิดปรับปรุง</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-cancel">ยกเลิก</button>
                    <button type="submit" class="btn-save">บันทึก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Item Modal -->
    <div class="modal" id="item-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="item-modal-title">เพิ่ม/แก้ไขข้อมูลอุปกรณ์</h2>
                <span class="close">&times;</span>
            </div>
            <!-- Update Item Form in staff.ejs -->
            <form id="item-form">
                <!-- Existing fields -->
                <div class="form-group">
                    <label for="item-id">รหัสอุปกรณ์</label>
                    <input type="text" id="item-id" name="item-id" required>
                </div>
                <div class="form-group">
                    <label for="item-name">ชื่ออุปกรณ์</label>
                    <input type="text" id="item-name" name="item-name" required>
                </div>
                
                <!-- Replace single type dropdown with multiple checkboxes -->
                <div class="form-group">
                    <label>ประเภทอุปกรณ์ (เลือกได้มากกว่า 1)</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="type-computer" name="item-type[]" value="computer">
                            <label for="type-computer">คอมพิวเตอร์</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="type-tablet" name="item-type[]" value="tablet">
                            <label for="type-tablet">แท็บเล็ต</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="type-projector" name="item-type[]" value="projector">
                            <label for="type-projector">โปรเจคเตอร์</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="type-audio" name="item-type[]" value="audio">
                            <label for="type-audio">อุปกรณ์เสียง</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="type-other" name="item-type[]" value="other">
                            <label for="type-other">อื่นๆ</label>
                        </div>
                    </div>
                </div>
                
                <!-- Other fields -->
                <div class="form-group">
                    <label for="item-status">สถานะ</label>
                    <select id="item-status" name="item-status" required>
                        <option value="available">ว่าง</option>
                        <option value="booked">จองแล้ว</option>
                        <option value="maintenance">ซ่อมบำรุง</option>
                    </select>
                </div>
                
                <!-- Add booking details fields -->
                <div class="form-group booking-details" id="booking-details" style="display: none;">
                    <h4>รายละเอียดการจอง</h4>
                    <div class="form-group">
                        <label for="item-borrower">ผู้จอง</label>
                        <input type="text" id="item-borrower" name="item-borrower">
                    </div>
                    <div class="form-group">
                        <label for="item-department">แผนก</label>
                        <input type="text" id="item-department" name="item-department">
                    </div>
                    <div class="form-group">
                        <label for="item-borrow-date">วันที่จอง</label>
                        <input type="date" id="item-borrow-date" name="item-borrow-date">
                    </div>
                    <div class="form-group">
                        <label for="item-borrow-time">เวลาที่จอง</label>
                        <input type="time" id="item-borrow-time" name="item-borrow-time">
                    </div>
                    <div class="form-group">
                        <label for="item-return-date">วันที่คืน (กำหนด)</label>
                        <input type="date" id="item-return-date" name="item-return-date">
                    </div>
                    <div class="form-group">
                        <label for="item-return-time">เวลาที่คืน (กำหนด)</label>
                        <input type="time" id="item-return-time" name="item-return-time">
                    </div>
                </div>
                
                <!-- Existing fields -->
                <div class="form-group">
                    <label for="item-purchase-date">วันที่จัดซื้อ</label>
                    <input type="date" id="item-purchase-date" name="item-purchase-date" required>
                </div>
                <div class="form-group">
                    <label for="item-description">รายละเอียดเพิ่มเติม</label>
                    <textarea id="item-description" name="item-description" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-cancel">ยกเลิก</button>
                    <button type="submit" class="btn-save">บันทึก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Repair Modal -->
    <div class="modal" id="repair-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>เพิ่ม/แก้ไขรายการซ่อม</h2>
                <span class="close">&times;</span>
            </div>
            <!-- Update Repair Form in staff.ejs -->
            <form id="repair-form">
                <div class="form-group">
                    <label for="repair-id">รหัสรายการ</label>
                    <input type="text" id="repair-id" name="repair-id" required>
                </div>
                <div class="form-group">
                    <label for="repair-item">อุปกรณ์</label>
                    <select id="repair-item" name="repair-item" required>
                        <option value="">-- เลือกอุปกรณ์ --</option>
                        <option value="I001">โน้ตบุ๊ก Dell XPS 15 (I001)</option>
                        <option value="I002">โปรเจคเตอร์ Epson (I002)</option>
                        <option value="I003">iPad Pro 12.9" (I003)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="repair-issue">รายละเอียดปัญหา</label>
                    <textarea id="repair-issue" name="repair-issue" rows="3" required></textarea>
                </div>
                
                <!-- Add location field -->
                <div class="form-group">
                    <label for="repair-location">ตำแหน่งของอุปกรณ์ (ถ้ามี)</label>
                    <input type="text" id="repair-location" name="repair-location" placeholder="เช่น ห้อง 301 อาคาร 2">
                </div>
                
                <!-- Add staff assignment field -->
                <div class="form-group">
                    <label for="repair-staff">เจ้าหน้าที่ผู้รับผิดชอบ</label>
                    <select id="repair-staff" name="repair-staff">
                        <option value="">-- ยังไม่กำหนดผู้รับผิดชอบ --</option>
                        <option value="staff1">นายช่างใจดี</option>
                        <option value="staff2">นายช่างมือหนึ่ง</option>
                        <option value="staff3">นายช่างเทคนิค</option>
                    </select>
                </div>
                
                <!-- Add image upload field -->
                <div class="form-group">
                    <label for="repair-images">รูปภาพปัญหา (เพิ่มได้หลายรูป)</label>
                    <div class="file-upload-container">
                        <input type="file" id="repair-images" name="repair-images" multiple accept="image/*">
                        <label for="repair-images" class="file-upload-label">
                            <i class="fas fa-cloud-upload-alt"></i> เลือกรูปภาพ
                        </label>
                    </div>
                    <div class="image-preview-container" id="image-preview-container">
                        <!-- Image previews will be displayed here -->
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="repair-date">วันที่แจ้ง</label>
                    <input type="date" id="repair-date" name="repair-date" required>
                </div>
                <div class="form-group">
                    <label for="repair-status">สถานะ</label>
                    <select id="repair-status" name="repair-status" required>
                        <option value="pending">รอดำเนินการ</option>
                        <option value="in-progress">กำลังซ่อม</option>
                        <option value="completed">ซ่อมเสร็จแล้ว</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="repair-notes">หมายเหตุ</label>
                    <textarea id="repair-notes" name="repair-notes" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-cancel">ยกเลิก</button>
                    <button type="submit" class="btn-save">บันทึก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- *Room Booking Details Modal -->
    <div class="modal" id="room-booking-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>รายละเอียดการจองห้อง</h2>
                <span class="close">&times;</span>
            </div>
            <div class="booking-details">
                <div class="room-info">
                    <h3 id="booking-room-name">ห้องประชุมใหญ่ (R001)</h3>
                    <p id="booking-room-description">รายละเอียด: ห้องประชุมขนาดใหญ่</p>
                    <p id="booking-room-capacity">ความจุ: 30 คน</p>
                </div>
                
                <div class="bookings-list">
                    <h4>ตารางการจอง</h4>
                    <div class="booking-filter">
                        <div class="form-group">
                            <label for="booking-month">ดูการจองในเดือน:</label>
                            <input type="month" id="booking-month" name="booking-month">
                            <button id="filter-bookings" class="btn-view">ค้นหา</button>
                        </div>
                    </div>
                    <div id="bookings-container" class="bookings-container">
                        <!-- จะใส่ข้อมูลการจองที่นี่ด้วย JavaScript -->
                        <div class="no-bookings" id="no-bookings" style="text-align:center; padding:20px; display:none;">
                            ไม่พบข้อมูลการจองในช่วงเวลาที่เลือก
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- *Item Booking Details Modal - Add this to staff.ejs -->
    <div class="modal" id="item-details-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>รายละเอียดอุปกรณ์</h2>
                <span class="close">&times;</span>
            </div>
            <div class="item-details">
                <div class="item-info">
                    <h3 id="details-item-name">โน้ตบุ๊ก Dell XPS 15 (I001)</h3>
                    <div class="item-types" id="details-item-types">
                        <span class="item-type">คอมพิวเตอร์</span>
                        <span class="item-type">โน้ตบุ๊ก</span>
                    </div>
                </div>
                
                <div class="item-status-details">
                    <div class="status-label">สถานะ:</div>
                    <span class="status booked" id="details-item-status">จองแล้ว</span>
                </div>
                
                <div class="booking-info" id="booking-info-section">
                    <h4>ข้อมูลการจอง</h4>
                    <div class="booking-detail-row">
                        <span class="detail-label"><i class="fas fa-user"></i> ผู้จอง:</span>
                        <span class="detail-value" id="details-borrower">วิชัย มานะ (แผนกบัญชี)</span>
                    </div>
                    <div class="booking-detail-row">
                        <span class="detail-label"><i class="fas fa-calendar"></i> วันที่จอง:</span>
                        <span class="detail-value" id="details-borrow-date">2023-08-10</span>
                    </div>
                    <div class="booking-detail-row">
                        <span class="detail-label"><i class="fas fa-clock"></i> เวลาที่จอง:</span>
                        <span class="detail-value" id="details-borrow-time">09:00 น.</span>
                    </div>
                    <div class="booking-detail-row">
                        <span class="detail-label"><i class="fas fa-calendar-check"></i> วันที่คืน (กำหนด):</span>
                        <span class="detail-value" id="details-return-date">2023-08-17</span>
                    </div>
                    <div class="booking-detail-row">
                        <span class="detail-label"><i class="fas fa-clock"></i> เวลาที่คืน (กำหนด):</span>
                        <span class="detail-value" id="details-return-time">17:00 น.</span>
                    </div>
                </div>
                
                <div class="item-additional-info">
                    <h4>ข้อมูลเพิ่มเติม</h4>
                    <div class="detail-row">
                        <span class="detail-label">วันที่จัดซื้อ:</span>
                        <span class="detail-value" id="details-purchase-date">15/06/2022</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">รายละเอียด:</span>
                        <p class="detail-value" id="details-description">โน้ตบุ๊กรุ่นใหม่ สำหรับงานกราฟิกและวิดีโอ</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Image Viewer Modal - Add this to staff.ejs -->
    <div class="modal" id="image-viewer-modal">
        <div class="modal-content image-viewer-content">
            <div class="modal-header">
                <h2 id="image-viewer-title">รูปภาพปัญหา</h2>
                <span class="close">&times;</span>
            </div>
            <div class="image-viewer-container">
                <div class="main-image-container">
                    <img id="main-image" src="" alt="รูปภาพปัญหา">
                </div>
                <div class="image-thumbnails" id="image-thumbnails">
                    <!-- Thumbnails will be added here -->
                </div>
                <div class="image-navigation">
                    <button id="prev-image" class="nav-button"><i class="fas fa-chevron-left"></i></button>
                    <span id="image-counter">1/3</span>
                    <button id="next-image" class="nav-button"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/staff.js"></script>
</body>
</html>